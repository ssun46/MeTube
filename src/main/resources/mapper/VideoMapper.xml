<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dev.metube.mapper.VideoMapper">
	<resultMap id="VideoResultMap" type="com.dev.metube.model.Video">
		<result column="reg_user" jdbcType="INTEGER" property="regUser"/>
		<result column="reg_date" jdbcType="TIMESTAMP" property="regDt"/>
		<result column="mod_date" jdbcType="TIMESTAMP" property="modDt"/>
	</resultMap>
	
	<insert id="insertFile" useGeneratedKeys="true" keyProperty="id" parameterType="com.dev.metube.model.Video">
		INSERT INTO tb_video (
			name,
			path,
			reg_user,
			reg_date,
			mod_date
		)
		VALUES (
			#{name},
			#{path},
			#{regUser},
			now(),
			now()
		)
	</insert>
	
	<select id="selectPathById" parameterType="java.lang.Integer" resultType="java.lang.String">
		SELECT	path
		FROM	tb_video
		WHERE	id = #{id}
	</select>
	
	<update id="update" parameterType="com.dev.metube.model.Video">
		UPDATE tb_video
		SET
			name = #{name},
			notes = #{notes},
			thumbnail = #{thumbnail},
			category = #{category},
			public_yn = #{public_yn.ordinal},
			mod_date = now()
		WHERE id = #{id}
	</update>
	
</mapper>